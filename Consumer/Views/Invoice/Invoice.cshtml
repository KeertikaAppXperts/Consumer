
@{
    ViewBag.Title = "InvoiceDemo";
}
<html>
<head>
    <style>
        .panelContainer {
            padding: 10px;
            margin-top: 10px;
            width:fit-content;
            border: 1px solid gray;
            border-radius: 5px;
            right: 10px;
            position:static;
            float:none;
            position:fixed;
            scroll-behavior:auto;
            padding-bottom:100px;
            
        }
    </style>
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.8/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.8/css/jquery.dataTables.min.css">
    <title>InvoiceDemo</title>
</head>
<body>
    @*<div style="margin-top:20px">
            &nbsp;  &nbsp;  Date  &nbsp; <input type="date" id="date" style="width:20px">
        </div>*@
    <div class="panelContainer">
        <!--<div class="container" style="margin-top:20px">
        <div class="row">
            <div class="col-md-2">
                <label for="invoicenumber" class="col-form-label" style="text-align:center">Invoice Number</label>
                <input type="text" class="form-control" id="invoicenumber" style="width:150px" onchange="getCustomerDetails()">
            </div>
            <div class="col-md-2">

                <label for="invoicedatefrom">Invoice Date</label><br>
                <input id="invoicedatefrom" class="form-control" readonly="readonly" autocomplete="on" style="width:150px" />
            </div>
            <div class="col-md-2">

                <label for="invoicedateto">Invoice Date</label><br>
                <input id="invoicedateto" class="form-control" readonly="readonly" autocomplete="on" style="width:150px" />
            </div>
            <div class="col-md-2">

                <input type="hidden" id="hdncustomercode" value="0">
                <label for="customername" class="col-form-label">Customer Name</label>
                <input type="text" class="form-control" id="customername" readonly="readonly" autocomplete="on" style="width:150px">

            </div>
            <div class="col-md-2">
                <label for="address" class="col-form-label" style="text-align:center">Address</label>
                <input type="text" class="form-control" id="address" readonly="readonly" autocomplete="on" style="width:150px">
            </div>
            <div class="col-md-2">
                <label for="city" class="col-form-label">City</label>
                <input type="text" class="form-control" id="city" readonly="readonly" autocomplete="on" style="width: 150px">
            </div>-->
        @*<div class="col-md-2">

            <label for="taxtype">Tax Type</label><br>
            <input id="taxtype" class="form-control" readonly="readonly" autocomplete="on" style="width:150px" />
        </div>
        <div class="col-md-2">

            <label for="invoicedate">Invoice Date</label><br>
            <input id="invoicedate" class="form-control" readonly="readonly" autocomplete="on" style="width:150px" />
        </div>*@
        <!--</div>
    </div><br>-->
        <div class="container">
            <div class="column">
                <button id="ShowAll" onclick="ShowAll()" class="btn btn-primary">Show All</button>
                 <a href="/Invoice/InvoiceDemo" class="Button btn btn-primary" style="position:fixed; left:1100px">Add New</a></div>
        </div>
               <table style="margin-top:35px;padding-left:10px" id="tableid" class="table table-striped table-responsive table-condensed table-bordered">
                <thead class="table-hover" style="padding-left:10px">
                    <tr>
                        <th>Invoice Number</th>
                        <th>Invoice Date</th>
                        <th>Customer Code</th>
                        <th>Customer Name</th>
                        <th>Net Total</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody style="padding-left:10px">
                </tbody>
            </table>
        </div>

        @*<div class="container" style="margin-top:20px">
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <label for="tax">Tax</label> <input type="text" id="tax" style="min-width:25px;margin-bottom:10px;margin-left:35px; border-color:gainsboro; height:30px;border-radius:5px " /><br>
                    <label for="subtotal">SubTotal</label> <input type="text" id="subtotal" style="min-width: 25px; border-color: gainsboro; margin-left: 2px; height: 30px; border-radius: 5px " onclick="calculateSubTotal(this)" /><br>
                    <label for="nettotal">NetTotal</label> <input type="text" id="nettotal" style="min-width:25px;margin-top:10px;margin-left:7px; border-color:gainsboro; height:30px;border-radius:5px " onclick="calculateNetTotal(this)" />
                </div>
            </div>
        </div>*@
        @*<div class="col-md-4" style="left:77%;margin-top:30px">
            <button id="new" class="btn btn-primary" onclick="saveHeaderDetail()">Save</button> <button id="new" class="btn btn-primary">Cancel</button>
        </div>
    </div>*@

</body>
</html>
<script>

    $(document).ready(function () {
        debugger
        //getCustomernames();
       
    });
    
    //function getCustomernames() {
    //    $.ajax({
    //        url: "/Home/GetAll",
    //        dataType: "json",
    //        async: false,
    //        contentType: "application/json; charset=utf-8",
    //        type: "POST",
    //        data: '',
    //        success: function (data) {
    //            $.each(data, function (key, value) {
    //                if (data != null) {
    //                    $('#customername').append("<option value='" + value.CustomerCode + "' >" + value.CustomerName + "</option>");
    //                }
    //            });
    //        }
    //    });
    //}
    //$("#invoicenumber").change(function () {
    //    getCustomerDetails();
    //});
    //function getCustomerDetails() {
    //    debugger
    //    var itemId = $("#invoicenumber").val();
    //    $.ajax({
    //        url: "/Invoice/GetCustomerInvoice",
    //        dataType: "Json",
    //        type: "GET",
    //        async: false,
    //        contentType: "application/json; charset=url-8",
    //        data: { invoiceNumber: itemId },
            
    //        success: function (data) {
    //            $("#customername").val(data.CustomerName);
    //            $("#address").val(data.Address);
    //            $("#city").val(data.City);
    //            $("#invoicedatefrom").val(data.Tax);
    //            var date1 = $("#invoicedateto").val(data.InvoiceDate);
    //            date1.val(d + "." + m + "." + y);
              
    //        },
           
    //    });
    //}

    function ShowAll() {
        debugger
       
        $.ajax({
            type: "POST",
            url: "/Invoice/ShowAll",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (data) {
                debugger
                if (data != null) {
                    $.each(data, function (key, value) {
                        var Row = "";
                        Row += "<tr id='rowdata'>";
                        Row += "<td id='invoicenumber'>" + value.InvoiceNumber + "</td>";
                        Row += "<td id='invoicedate'>" + value.InvoiceDate + "</td>";
                        Row += "<td id='customercode' >" + value.CustomerCode + "</td>";
                        Row += "<td id='customername'>" + value.CustomerName + "</td>";
                        Row += "<td id='nettotal'>" + value.NetTotal + "</td>";
                        Row += "<td><input type='hidden' id='hdn' name='hidden' value='" + value.InvoiceNumber + "'><button class='btn btn-primary' type='button' onclick='EditInvoice(this)'><i class='fa-solid fa-file-pen'></i> </button> &nbsp;<button class='btn btn-primary'  onclick='DeleteInvoice(this)' type='button' ><i class='fa-solid fa-trash'></i></button></td>";
                        $("#tableid tbody").append(Row);
                    });
                }
            }
        });
    }

    function DeleteInvoice(element) {
        debugger
        var code = $(element).closest('tr').find("#hdn").val();
        $.ajax(
            {
                url: "/Invoice/DeleteInvoiceController",
                data: JSON.stringify({
                    invoicenumber: code
                }),
                type: "POST",
                async: false,
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (data) {
                    if (data != null) {
                        getCustomerDetails();
                        alert("Customer's Invoice detail is removed !")
                    }
                },
               // error: function (errormessage){ }
            });
    }
    function EditInvoice(element) {
        debugger
        var code = $(element).closest('tr').find("#hdn").val();
        $.ajax(
            {
                url: "/Invoice/EditInvoiceContoller",
                data: JSON.stringify({
                    invoicenumber: code
                }),
                type: "POST",
                async: false,
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (data) {
                    if (data != null) {
                        $("#invoicenumber").val(data.InvoiceNumber);
                        $("#invoicedate").val(data.InvoiceDate);
                        $("#customercode").val(data.CustomerCode);
                        $("#customername").val(data.CustomerName);
                        $("#nettotal").val(data.NetTotal);

                        alert("Customer's Invoice detail is edited !");
                    }
                },
            });
    }

</script>


